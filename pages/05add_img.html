<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Foxtech | Django Image Upload</title>
		<link rel="stylesheet" href="assests/style.css" />
	</head>

	<body>
		<div class="wrap">
			<header id="header"></header>

			<main>
				<section>
					<article class="card">
						<!-- Lesson --------------------------------------------------------->
						<div class="lesson">
							<h2 id="image-upload">Image Upload & Display (ImageField)</h2>
							<div class="meta">
								Upload images using ImageField and render them in HTML templates
							</div>

							<p>
								Django provides <code>ImageField</code> to store and handle image
								files. This lesson shows how to upload an image and display it on a
								webpage.
							</p>

							<h3>Step 1: Install Pillow</h3>
							<p><code>ImageField</code> requires the Pillow library.</p>

							<pre><code><div class="code-heading">Terminal</div>
pip install pillow
</code></pre>

							<h3>Step 2: Model with ImageField</h3>

							<pre><code><div class="code-heading">myapp/models.py</div>
from django.db import models

class Student(models.Model):
    name = models.CharField(max_length=50)
    age = models.IntegerField()
    profile_pic = models.ImageField(upload_to="profile/", null=True, blank=True)
</code></pre>

							<pre><code><div class="code-heading">Terminal</div>
python manage.py makemigrations
python manage.py migrate
</code></pre>

							<h3>Step 3: Media settings</h3>

							<pre><code><div class="code-heading">myproject/settings.py</div>
...
MEDIA_URL = "/media/"
MEDIA_ROOT = BASE_DIR / "media"
</code></pre>

							<pre><code><div class="code-heading">myproject/urls.py</div>
...
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    ...
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
</code></pre>
							<h3>Step 4: Forms</h3>

							<pre><code><div class="code-heading">myapp/forms.py</div>
from django import forms
from myapp.models import Student

class StudentForm(forms.ModelForm):
    class Meta:
        model = Student
        fields = ['name', 'age', 'profile_pic']
</code></pre>
							<h3>Step 5: View</h3>

							<pre><code><div class="code-heading">myapp/views.py</div>
def create(request):
    if request.method == "POST":
        form = StudentForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return redirect('home')
    else:
        form = StudentForm()
    return render(request, "create.html", {'form': form})
</code></pre>

							<h3>Step 6: Templates</h3>

							<pre><code><div class="code-heading">myapp/templates/create.html</div>
&lt;h2&gt;Create Post&lt;/h2&gt;

&lt;form method="POST" enctype="multipart/form-data"&gt;
    {% csrf_token %}
    {{ form.as_p }}
    &lt;button&gt;Create&lt;/button&gt;
&lt;/form&gt;
</code></pre>

							<pre><code><div class="code-heading">myapp/templates/read.html</div>
&lt;h1&gt;Student List&lt;/h1&gt;
&lt;ul&gt;
    {% for student in students %}
    &lt;li&gt;
		{% if student.profile_pic %}
			&lt;img src="{{ student.profile_pic.url }}" width="120" /&gt;
		{% endif %}
        {{ student.name }} - {{ student.age }} years old
    &lt;/li&gt;
    &lt;hr /&gt;
    {% endfor %}
&lt;/ul&gt;
</code></pre>

							<h3>Important Notes</h3>
							<ul>
								<li>
									Always use <code>enctype="multipart/form-data"</code> for file
									uploads
								</li>
								<li>Access images using <code>{{ image_field.url }}</code></li>
								<li>Images are stored inside the <code>media/</code> folder</li>
							</ul>
						</div>
					</article>
				</section>

				<aside>
					<div class="card">
						<h3>Contents</h3>
						<ul class="toc">
							<li><a href="#image-upload">Image Upload</a></li>
						</ul>

						<h4>Task</h4>
						<ul>
							<li>Create a post with an image</li>
							<li>Display uploaded image in browser</li>
						</ul>
					</div>
				</aside>
			</main>

			<div id="lightbox">
				<span id="close">&times;</span>
				<img id="lightbox-img" />
				<div id="prev" class="nav">&#10094;</div>
				<div id="next" class="nav">&#10095;</div>
			</div>
			<div id="footer"></div>
		</div>

		<script src="assests/scripts.js"></script>
	</body>
</html>
